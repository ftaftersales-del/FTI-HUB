<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FTCLAIMS - Dettaglio Claim Card</title>

  <link rel="stylesheet" href="ftstyle.css?v=6">
  <link rel="stylesheet" href="ftclaims_step2.css?v=2">

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-storage-compat.js"></script>
  <script src="firebase-config.js"></script>

  <!-- claim forms (GARANZIA/RSA/...) -->
  <script src="ftclaims-claimforms.js"></script>

  <!-- STEP2 split -->
  <script defer src="ftclaims_step2.servicecontract.js?v=1"></script>
  <script defer src="ftclaims_step2.core.js?v=1"></script>
</head>

<body class="ft-page has-topbar">

  <!-- TOPBAR -->
  <div class="ft-topbar">
    <div class="ft-topbar__inner">
      <div class="ft-topbar__left">
        <div class="ft-topbar__brand">FTI-HUB</div>
        <div class="ft-topbar__subtitle">FTCLAIMS · Dettaglio Claim Card</div>
      </div>

      <div class="ft-topbar__center">
        <div class="ft-topbar__userinfo" id="topbarUserInfo"></div>
      </div>

      <div class="ft-topbar__right">
        <a href="/FTI-HUB/FTHUBAS.html" class="ft-home-btn">← HOME</a>
      </div>
    </div>
  </div>

  <!-- WRAP largo -->
  <div class="ftclaims-wrap">

    <div class="panel" style="padding:14px 16px;">
      <h1 style="margin:0; font-size:20px; font-weight:900; letter-spacing:-0.2px;">Dettaglio Claim Card</h1>
      <div class="muted" style="margin-top:4px;">Visualizza e gestisci i dati della pratica.</div>
      <div id="banner" class="section" style="margin-top:12px; display:none;"></div>
    </div>

    <div class="ftclaims-layout" style="margin-top:12px;">

      <!-- LEFT -->
      <div class="ftclaims-left">
        <div class="panel">

          <div class="section">
            <div class="section-head">
              <div>
                <div class="section-title">Dati pratica</div>
                <div class="section-sub">Informazioni generali e stato della claim card.</div>
              </div>
            </div>

            <div class="grid2">
              <div><label>Codice pratica</label><input id="ui_code" type="text" readonly /></div>
              <div><label>Tipologia</label><input id="ui_type" type="text" readonly /></div>
              <div><label>Data apertura</label><input id="ui_openDate" type="text" readonly /></div>
              <div><label>Data ordine di lavoro</label><input id="ui_orderDate" type="text" readonly /></div>
              <div><label>Nome operatore apertura</label><input id="ui_openUser" type="text" readonly /></div>
              <div><label>Dealer apertura</label><input id="ui_openDealer" type="text" readonly /></div>
            </div>

            <div style="margin-top:10px;">
              <label>Stato pratica</label>
              <select id="ui_status">
                <option value="Aperta">Aperta</option>
                <option value="Inviata">Inviata</option>
                <option value="Sospesa">Sospesa</option>
                <option value="In Valutazione">In Valutazione</option>
                <option value="Conclusa">Conclusa</option>
                <option value="Cancellata">Cancellata</option>
              </select>
              <div class="muted" style="margin-top:6px;">
                Stati: Aperta, Inviata, Sospesa, In Valutazione, Conclusa, Cancellata.
              </div>
            </div>
          </div>

          <div class="section">
            <div class="section-head">
              <div>
                <div class="section-title">Dati veicolo</div>
                <div class="section-sub">VIN e dati anagrafici veicolo.</div>
              </div>
            </div>

            <div class="grid2">
              <div><label>VIN</label><input id="ui_vin" type="text" readonly /></div>
              <div><label>Customer</label><input id="ui_customer" type="text" readonly /></div>
              <div><label>Registration Plate</label><input id="ui_plate" type="text" readonly /></div>
              <div><label>Registration Date</label><input id="ui_regDate" type="text" readonly /></div>
            </div>
          </div>

          <div class="section">
            <div class="section-head">
              <div>
                <div class="section-title">Copertura garanzia</div>
                <div class="section-sub">Alla data dell’ordine di lavoro.</div>
              </div>
            </div>

            <div class="grid2">
              <div><label>Tipo copertura</label><input id="ui_covType" type="text" readonly /></div>
              <div><label>Data inizio</label><input id="ui_covStart" type="text" readonly /></div>
              <div><label>Data fine</label><input id="ui_covEnd" type="text" readonly /></div>
              <div></div>
            </div>

            <div style="margin-top:10px;">
              <label>Note copertura</label>
              <textarea id="ui_covNotes" rows="2" readonly></textarea>
            </div>
          </div>

          <div class="section">
            <div class="section-head">
              <div>
                <div class="section-title">Contratto di manutenzione</div>
                <div class="section-sub">Se presente.</div>
              </div>
            </div>

            <div class="grid2">
              <div><label>Data inizio</label><input id="ui_scStart" type="text" readonly /></div>
              <div><label>Data fine</label><input id="ui_scEnd" type="text" readonly /></div>
            </div>

            <div style="margin-top:10px;">
              <label>Opzioni presenti</label>
              <textarea id="ui_scOptions" rows="2" readonly></textarea>
            </div>
          </div>

          <div class="section">
            <div class="section-head">
              <div>
                <div class="section-title">Chilometraggio / ore motore</div>
                <div class="section-sub">Campi modificabili.</div>
              </div>
            </div>

            <div class="grid2">
              <div><label>KM veicolo</label><input id="ui_km" type="number" min="0" step="1"/></div>
              <div><label>Ore motore</label><input id="ui_hours" type="number" min="0" step="1"/></div>
            </div>

            <div class="row" style="margin-top:12px;">
              <button id="btnHome" class="btn btn-small" type="button">Home Page</button>
              <button id="btnSaveCard" class="btn btn-primary btn-small" type="button">Salva modifiche</button>
              <button id="btnCancelCard" class="btn btn-danger btn-small" type="button">Cancella richiesta</button>
            </div>
          </div>

        </div>
      </div>

      <!-- RIGHT (larga) -->
      <div class="ftclaims-right">
        <div class="panel">
          <div class="claimsHeader">
            <div>
              <div class="section-title">Gestione claim collegati</div>
              <div class="section-sub">Crea e gestisci le riparazioni collegate alla claim card.</div>
            </div>
            <button id="btnCreateClaim" class="btn btn-primary btn-small" type="button">Crea claim</button>
          </div>

          <div class="mutedBox" id="createBox">
            <div class="grid2">
              <div>
                <label>Tipologia claim</label>
                <select id="newClaimType"></select>
                <div class="muted" style="margin-top:6px;">La lista varia in base alla tipologia della claim card.</div>
              </div>
              <div>
                <label>&nbsp;</label>
                <button id="btnDoCreateClaim" class="btn btn-primary" type="button" style="width:100%;">Crea</button>
              </div>
            </div>
          </div>

          <div id="claimsList"></div>
        </div>
      </div>

    </div>
  </div>

</body>
</html>
